# Маршрутизация в React. Тесты.

## Технические требования

1. Создайте отдельную ветку для этой задачи на основе ветки предыдущей задачи. Название ветки: `hooks-and-routing`.
2. Все компоненты должны быть изменены на **функциональные компоненты**, кроме **Error Boundary** компонентов, так как для обработки ошибок в React все еще нужны классовые компоненты.
    - Реализуйте пользовательский хук для восстановления поискового запроса из локального хранилища (LS) и сохранения его в LS при размонтировании. Используйте соответствующий хук жизненного цикла React.
3. Вся логика должна быть разбита на компоненты:
    - Если требуется доступ к жизненному циклу компонента или состоянию, используйте **хуки**.
    - Все данные должны храниться в **состоянии компонента**.
4. Добавьте маршрутизацию в ваше приложение с использованием **React Router**.
5. Добавьте страницу 404, когда пользователь переходит на несуществующий маршрут.
6. Добавьте и настройте тестовый фреймворк: Jest или Vitest. Тестовый фреймворк должен показывать покрытие тестами. Вы должны стремиться достичь как минимум 80% покрытия тестами.
7. Добавьте библиотеку тестирования: React Testing Library. Вы должны добавить тесты для нескольких сценариев, помня, что вместо реальных вызовов API должны использоваться мокированные данные.
8. Тесты для компонента списка карточек (Card List):
    - Проверьте, что компонент отображает указанное количество карточек;
    - Проверьте, что отображается соответствующее сообщение, если карточек нет.
9. Тесты для компонента карточки (Card):
    - Убедитесь, что компонент карточки отображает соответствующие данные карточки;
    - Проверьте, что при клике на карточку открывается компонент детальной карточки;
    - Проверьте, что при клике выполняется дополнительный вызов API для получения детальной информации.
10. Тесты для компонента детальной карточки (Detailed Card):
    - Проверьте, что индикатор загрузки отображается во время получения данных;
    - Убедитесь, что компонент детальной карточки корректно отображает детальные данные карточки;
    - Проверьте, что при клике на кнопку закрытия компонент скрывается.
11. Тесты для компонента пагинации (Pagination):
    - Убедитесь, что компонент обновляет параметр запроса URL при смене страницы.
12. Тесты для компонента поиска (Search):
    - Проверьте, что при клике на кнопку поиска введенное значение сохраняется в локальном хранилище;
    - Проверьте, что компонент извлекает значение из локального хранилища при монтировании.
13. Наконец, обновите Husky для запуска тестов при pre-push хуке, чтобы тесты автоматически выполнялись перед любыми отправками кода.

## Требования к приложению

1. Добавьте пагинацию:
    - Реализуйте пагинацию для существующего списка элементов;
    - Отображайте текущую страницу в URL браузера, используя параметры запроса (например, ?page=2, например, /search/2).
    - Компонент пагинации должен появляться после получения списка всех элементов.
2. Главная страница отображает результаты поиска. При клике на элемент страница должна быть разделена на 2 секции:
    - Левая секция продолжит отображать результаты поиска;
    - Правая секция должна отображать детали с использованием Router Outlet (показывать индикатор загрузки при выполнении дополнительного вызова для получения деталей, добавить управление для закрытия секции, также секция должна закрываться, когда пользователь кликает на левую секцию);
    - Отразите в URL, что секция "Детали" открыта для выбранного элемента (например, /?frontpage=2&details=1).

## Оценивание

Максимально можно получить 100 баллов.

### Перекрестная проверка (оценка может быть ниже, если некоторые части функционала не работают)

- Тесты добавлены в проект, могут быть запущены через команду `test` в package.json, нет ошибок, покрытие тестами >= 80% (по крайней мере для `statements`) - **30**
- Конвертация классовых компонентов в функциональные компоненты с хуками - **15**
- Пользовательский хук для восстановления поискового запроса из LS и сохранения его обратно в LS при размонтировании - **5**
- Пагинация присутствует как в URL, так и на странице - **20**
- При клике открывается панель с деталями справа на странице: - **5**
    - используйте router outlet, левая сторона страницы должна продолжать отображать список результатов - **10**
    - инициализируйте дополнительный вызов API, отображайте загрузчик и обновляйте URL - **5**
    - Панель деталей должна закрываться либо при клике на кнопку "закрыть", либо при клике на основную панель - **10**

### Штрафы

- TypeScript не используется: **-95 баллов**
- Использование _any_: **-20 баллов за каждое**
- Использование _ts-ignore_: **-20 баллов за каждое**
- Прямые манипуляции DOM внутри React компонентов: **-50 баллов за каждое**
- Наличие _code-smells_ (God-object, дублирующиеся куски кода), закомментированные секции кода: **-10 баллов за каждое**
- Использование Redux или других библиотек управления состоянием: **-100 баллов**
- Использование библиотек компонентов, например Material UI, Ant Design: **-100 баллов**
- Коммиты после дедлайна: **-40 баллов**
- Pull Request не соответствует руководству (включая чекбоксы в Score) [PR example](https://docs.rs.school/#/en/pull-request-review-process?id=pull-request-description-must-contain-the-following): **-10 баллов**

Оригинал: https://github.com/rolling-scopes-school/tasks/blob/master/react/modules/tasks/routing.md