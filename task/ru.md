# Redux. Redux Toolkit, RTK Query. Context API.

## Технические требования

1. Создайте отдельную ветку для этой задачи от предыдущей ветки задачи. Название ветки: "app-state-management".
2. Интеграция Redux:
    - Интегрируйте Redux в ваше приложение. Вам нужно будет настроить хранилище Redux и редьюсеры, используя Redux Toolkit.
3. Интеграция RTK Query:
    - Реализация RTK Query: используйте Redux Toolkit Query (RTK Query) для выполнения API-запросов и кэширования результатов. Это изменит вашу предыдущую реализацию API-запросов;
    - Используйте RTK Query, чтобы показать, загружаются ли данные. Избегайте передачи данных через пропсы, если требуется показать индикатор в дочернем компоненте, поместите соответствующий флаг в хранилище;
    - Элементы, возвращенные для текущей страницы, должны храниться в хранилище;
    - Данные выбранного элемента должны храниться в хранилище.
4. Context API:
    - Добавьте контекст для управления темой приложения (светлая или темная).
5. Обновление тестов:
    - Обновите ваши тесты с учетом изменений, внесенных Redux и RTK Query.
    - Проверьте функциональность, связанную с состоянием Redux и API-запросами.

## Требования к приложению

1. Выбранные элементы (Redux):
    - Каждый элемент на панели управления должен иметь флажок, информация о выбранных элементах должна храниться в хранилище;
    - Когда пользователь переходит на следующую страницу, а затем возвращается назад, ранее выбранные элементы должны отображаться (если они были);
    - Когда пользователь снимает выбор с элемента, он должен быть удален из хранилища.
2. Загрузка выбранных элементов (Redux):
    - Когда выбран хотя бы один элемент, должен появиться элемент flyout внизу страницы;
    - Элемент flyout должен содержать количество выбранных элементов (например, "Выбрано 3 элемента") и 2 кнопки: "Снять выбор со всех" и "Скачать";
    - Когда нажата кнопка "Снять выбор со всех", все выбранные элементы должны быть отменены, и элемент flyout должен быть удален со страницы;
    - Когда нажата кнопка "Скачать", вы должны сохранить список выбранных элементов (например, имя, описание, URL деталей, любую другую полезную информацию) в файл .csv, имя файла должно содержать количество выбранных элементов (например, если вы выбрали 15 элементов из конечной точки API Star Trek, имя может быть "15_episodes.csv").
3. Пользовательская тема (Context API):
    - Добавьте кнопку/радиокнопки/выпадающий список в верхней части приложения для выбора темы;
    - Пользователь должен иметь возможность выбрать одну из 2 тем (например, светлую или темную);
    - Выбранная тема должна влиять на внешний вид всего приложения.

## Баллы

Максимально студент может получить 200 баллов.

### Кросс-чек (оценка может быть ниже, если некоторые части функциональности не работают)

- RTK Query используется для API-запросов - **25**
- Текущая страница и данные выбранного элемента сохраняются в отдельных слайсах в хранилище Redux - **25**
- Выбранные элементы управляются через хранилище Redux, выбранные элементы сохраняются при переходе между страницами - **50**
- Компонент flyout показывается/скрывается в зависимости от наличия выбранных элементов, отображает количество выбранных элементов - **20**
- Кнопки "Снять выбор со всех" и "Скачать" работают согласно требованиям - **35**
- Пользователь может переключать тему приложения - **45**

### Штрафы

- TypeScript не используется: **-195 баллов**
- Покрытие тестами ниже 80%: **-100 баллов**
- Использование _any_: **-20 баллов за каждое**
- Использование _ts-ignore_: **-20 баллов за каждое**
- Прямые манипуляции с DOM внутри React-компонентов: **-50 баллов за каждое**
- Наличие _code-smells_ (God-object, повторяющиеся фрагменты кода), закомментированные разделы кода: **-10 баллов за каждое**
- Использование библиотек компонентов, таких как Material UI, Ant Design: **-100 баллов**
- Коммиты после дедлайна: **-40 баллов**
- Pull Request не соответствует руководству (включая чекбоксы в Score) [Пример PR](https://docs.rs.school/#/en/pull-request-review-process?id=pull-request-description-must-contain-the-following): **-10 баллов**
